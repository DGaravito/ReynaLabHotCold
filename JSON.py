#!/usr/bin/env python3

# This script is just for mass changing the JSON files to add info and conform to BIDS

import json
import os
import glob

subjects = ['001',
'002',
'003',
'004',
'005',
'006',
'007',
'008',
'009',
'010',
'011',
'013',
'014',
'015',
'016',
'017',
'018',
'019',
'020',
'021',
'022',
'023',
'024',
'025',
'026',
'027',
'028',
'029',
'030',
'031',
'032',
'033',
'034',
'035',
'036',
'037',
'038',
'039',
'040',
'041',
'042',
'043',
'045',
'046',
'047',
'048',
'049',
'050',
'051',
'052',
'053',
'054',
'055',
'056',
'057',
'058',
'059',
'060',
'061',
'062',
'063',
'064',
'065',
'066',
'067',
'068',
'069',
'070',
'071',
'072',
'073',
'074',
'075',
'076',
'077',
'078',
'079',
'080',
'081',
'082',
'083',
'084',
'085',
'086',
'087',
'088',
'089',
'090',
'091',
'092',
'093',
'094',
'095',
'096',
'097',
'099',
'100',
'101',
'102',
'103',
'104',
'105',
'106',
'107',
'108',
'109',
'110',
'111',
'112',
'113',
'114',
'116',
'117',
'118',
'119',
'120',
'121',
'122',
'123',
'124',
'125',
'126',
'127',
'128',
'129',
'130',
'131',
'132'] # list of subjects that have neuro data

for subj in subjects: # loop for each subject
    print ("current subject is: " + subj)
    path = '/Users/DGaravito/Documents/1stHalfFunctional/Data-BIDS/sub-' + subj + '/anat' # set path to be current subject's anatomical folder
    for infile in glob.glob(os.path.join(path, '*.json') ): # loop for all json files in subject anatomical folder
        print ("current file is: " + infile)
        with open(infile, 'r+') as f:
            data = json.load(f) # load json info
            data['PhaseEncodingDirection'] = "i" # add encoding
            f.seek(0) # should reset file position to the beginning.
            json.dump(data, f, indent=1)
            f.truncate() # remove remaining part
    path = '/Users/DGaravito/Documents/1stHalfFunctional/Data-BIDS/sub-' + subj + '/func' # set path to be current subject's functional folder
    for infile in glob.glob(os.path.join(path, '*.json') ): # loop for all json files in subject functional folder
        print ("current file is: " + infile)
        with open(infile, 'r+') as f:
            data = json.load(f) # load json info
            data['PhaseEncodingDirection'] = "j" # add encoding
            data['TaskName'] = "framing" # add task
            data['SliceTiming'] = [0,
            1,
            0.04545,
            1.04545,
            0.0909,
            1.0909,
            0.13635,
            1.13635,
            0.1818,
            1.1818,
            0.22725,
            1.22725,
            0.2727,
            1.2727,
            0.31815,
            1.31815,
            0.3636,
            1.3636,
            0.40905,
            1.40905,
            0.4545,
            1.4545,
            0.49995,
            1.49995,
            0.5454,
            1.5454,
            0.59085,
            1.59085,
            0.6363,
            1.6363,
            0.68175,
            1.68175,
            0.7272,
            1.7272,
            0.77265,
            1.77265,
            0.8181,
            1.8181,
            0.86355,
            1.86355,
            0.909,
            1.909,
            0.95445,
            1.95445] # add slice timings
            f.seek(0) # should reset file position to the beginning.
            json.dump(data, f, indent=1)
            f.truncate() # remove remaining part
